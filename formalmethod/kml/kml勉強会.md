# KML勉強会

(川口さんの講義のメモの断片）

## 形式手法とは何か

数理論理学に基づき、品質の良いソフトウェアを効率よく開発するための科学的・系統的アプローチ（仕様記述）

see) 形式手法の適用レベル

### メリット

* 自分の考えていることの遂行
* コミュニケーション

ソフトウェアにおける仕様は≒振る舞い

## 仕様（振る舞い）を記述する

振る舞いを書く記法は（UMLでは）

* シーケンス図
    * 網羅的に書かない
* コラボレーション図
    * 構成要素の相互作用を書いたもの。外から見てどう振る舞うかと抽象度は異なる
* ステートチャート（状態遷移図）
    * 外から見た振る舞いを網羅的に記述可能

→状態遷移を示す記法が向く（図である必要はない）

状態遷移モデル（図である必要は無いものを指す語として定義）


図でない理由

## 状態遷移の変数抽象

複数の状態を変数でグループ化


```
              inc         inc         inc         inc 
     ┌───┐  ┌───┐  ┌───┐  ┌───┐  ┌───┐
● →│  S0  │→│  S1  │→│  S2  │→│  S3  │→│  S4  │
     │      │←│      │←│      │←│      │←│      │
     └───┘  └───┘  └───┘  └───┘  └───┘
               dec         dec         dec        dec
```


```
n : Int

              inc         inc         inc         inc
     ┌───┐  ┌───┐  ┌───┐  ┌───┐  ┌───┐
● →│  S0  │→│  S1  │→│  S2  │→│  S3  │→│  S4  │
     │(n=0) │←│(n=1) │←│(n=2) │←│(n=3) │←│(n=4) │
     └───┘  └───┘  └───┘  └───┘  └───┘
               dec         dec         dec         dec
```

```
n : Int
                           [n < 3] 
                           inc / n'=n+1                     inc / n'=n
                           ┌────┐          [n=3]      ┌┐
          inc / n'=1       │        ↓           inc / n'=4│↓
     ┌───┐  ┌───────────────┐  ┌───┐
● →│  S0  │→│             S1-3             │→│  S4  │
     │(n=0) │←│           (1<=n<=2)          │←│(n-4) │
     └───┘  └───────────────┘  └───┘
     ↑│  dec / n'=0      ↑        │           dec / n'=3
     └┘                  └────┘
    dec / n'=n               dec / n'=n-1

```



事後条件とは、事前の状態と事後の状態の関係を示す

遷移にガード条件をつける（グループから飛び出すか、飛び出さないか）


* Point
    * すべての遷移で変数について言及する
    * 変わらないことも事後条件で明記する


## Ref:

[ケーススタディで学ぶ仕様の書き方](http://jasst.jp/symposium/jasst18tokyo/pdf/B5.pdf)
